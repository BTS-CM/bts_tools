{% extends "layouts/base.html" %}

{% block title %}{{ title }}{% endblock %}

{################################ HTML CONTENT ################################}
{% block content %}

<div id="cpu_plot" style="width: 100%; height: 200px;"></div>
<div id="connections_plot" style="width: 96%; margin: 0; left: 16px; height: 200px;"></div>

{% endblock %}



{################################# JAVASCRIPT #################################}
{% block scripts %}
<script src="/static/js/jquery.flot.0.8.3.min.js"></script>
<script src="/static/js/jquery.flot.time.0.8.3.min.js"></script>

<script type="text/javascript">

var cpu = [{% for pt in points %}[{{ pt[0]}}, {{ pt[1] }}], {% endfor %}];
var mem = [{% for pt in points %}[{{ pt[0]}}, {{ pt[2] }}], {% endfor %}];
var conn = [{% for pt in points %}[{{ pt[0]}}, {{ pt[3] }}], {% endfor %}];

$.plot("#cpu_plot", [{data: cpu, label: "CPU %", lines: {fill: true}},
                     {data: mem, label: "Memory (MB)", yaxis: 2}], {
    xaxes: [{mode: "time", timezone: "browser", lines: { fill: true } }],
    yaxes: [{min: 0, /*max: 100,*/ tickFormatter: function(v, axis) { return v + " %" }},
            {min: 0, position: "right", tickFormatter: function(v, axis) { return v + " MB" }}],
});

$.plot("#connections_plot", [{data: conn, label: "Number of connections"}], {
    xaxis: { mode: "time", timezone: "browser" },
    yaxis: { min: 0, minTickSize: 1 },
    legend: { position: "se" }
});

</script>
{% endblock %}
